<div [@routerTransition]>
  <section class="content-header">
    <div class="container-fluid">
      <div class="row">
        <div class="col-6">
          <h1>New Complaint Form</h1>
        </div>
      </div>
    </div>
  </section>
  <section class="content px-2">
    <div class="container-fluid">
      <form novalidate class="form-horizontal" autocomplete="off" (ngSubmit)="save()" #createSheetForm="ngForm"
        [busy]="saving">
        <div class="row">
          <div class="col">
            <div class="form-group required">
              <label class="col-form-label">Sheet Number</label>
              <input type="text" class="form-control" [(ngModel)]="complaint.sheetNumber" autofocus
                (ngModelChange)="complaint.sheetNumber = $event.toUpperCase()" required maxlength="256"
                name="complaintSheetNumber" #complaintSheetNumberModel="ngModel" #complaintSheetNumberEl>
              <abp-validation-summary [control]="complaintSheetNumberModel" [controlEl]="complaintSheetNumberEl">
              </abp-validation-summary>
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label class="col-form-label">Status</label>
              <select class="form-control" [(ngModel)]="complaint.status"
                (ngModelChange)="complaint.status = $event.toUpperCase()" [ngModelOptions]="{standalone: true}">
                <option value="NEW">NEW</option>
              </select>
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label class="col-form-label">Date Today</label>
              <input readonly type="datetime" class="form-control" [value]="currentDate">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label class="col-form-label">Reported Thru</label>
              <select class="form-control" [(ngModel)]="complaint.reportedThru" [ngModelOptions]="{standalone: true}"
                (ngModelChange)="complaint.reportedThru = $event.toUpperCase()">
                <option value="IN PERSON">IN PERSON</option>
                <option value="PHONE CALL">PHONE CALL</option>
                <option value="SMS">SMS</option>
                <option value="WEB">WEB</option>
              </select>
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label class="col-form-label">Reported to other agency?</label>
              <select class="form-control" [(ngModel)]="complaint.previouslyReported"
                (ngModelChange)="complaint.previouslyReported = $event.toUpperCase()"
                [ngModelOptions]="{standalone: true}">
                <option [ngValue]="false">NO</option>
                <option [ngValue]="true">YES</option>
              </select>
            </div>
          </div>
        </div>
        <div class="row" *ngIf="complaint.previouslyReported">
          <div class="col">
            <div class="form-group">
              <label class="col-form-label">To what agency</label>
              <input type="text" class="form-control" [(ngModel)]="complaint.previouslyReportedAgency"
                (ngModelChange)="complaint.previouslyReportedAgency = $event.toUpperCase()"
                [ngModelOptions]="{standalone: true}">
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label class="col-form-label">By whom</label>
              <input type="text" class="form-control" [(ngModel)]="complaint.previouslyReportedWhom"
                (ngModelChange)="complaint.previouslyReportedWhom = $event.toUpperCase()"
                [ngModelOptions]="{standalone: true}">
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label class="col-form-label">When previously reported</label>
              <input type="text" class="form-control" bsDatepicker [bsValue]="previouslyReportedOn"
                (bsValueChange)="previouslyReportedOnValueChanged($event)">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-group required">
              <label class="col-form-label">Nature of complaint</label>
              <select class="form-control" [(ngModel)]="complaint.nature"
                (ngModelChange)="complaint.nature = $event.toUpperCase()" required name="complaintNature"
                #complaintNatureModel="ngModel" #complaintNatureEl>
                <option value="EXTORTION">EXTORTION</option>
                <option value="SMUGGLING">SMUGGLING</option>
                <option value="DRUGS">DRUGS</option>
                <option value="KIDNAPPING">KIDNAPPING</option>
                <option value="HULIDAP">HULIDAP</option>
                <option value="ILLEGAL GAMBLING">ILLEGAL GAMBLING</option>
                <option value="PHYSICAL INJURIES">PHYSICAL INJURIES</option>
                <option value="GUN RUNNING">GUN RUNNING</option>
                <option value="ILLEGAL LOGGING">ILLEGAL LOGGING</option>
                <option value="ACT AS PROTECTOR">ACT AS PROTECTOR</option>
                <option value="UNEXPLAINED WEALTH">UNEXPLAINED WEALTH</option>
                <option value="OTHER ANALOGOUS ANOMALIES">OTHER ANALOGOUS ANOMALIES</option>
              </select>
              <abp-validation-summary [control]="complaintNatureModel" [controlEl]="complaintNatureEl">
              </abp-validation-summary>
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label class="col-form-label">Place of incident</label>
              <input type="text" class="form-control" [(ngModel)]="complaint.placeIncident"
                (ngModelChange)="complaint.placeIncident = $event.toUpperCase()" [ngModelOptions]="{standalone: true}">
            </div>
          </div>
          <div class="col">
            <div class="form-group required">
              <label class="col-form-label">Date of incident</label>
              <input type="text" class="form-control" bsDatepicker [bsValue]="dateIncident"
                (bsValueChange)="dateIncidentValueChanged($event)">
            </div>
          </div>
          <div class="col">
            <div class="form-group required">
              <label class="col-form-label">Time of incident</label>
              <timepicker [showSpinners]="false" [(ngModel)]="complaint.timeIncident"
                [ngModelOptions]="{standalone: true}"></timepicker>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-group required">
              <label class="col-form-label">Complainant/Informer Name</label>
              <input type="text" class="form-control" [(ngModel)]="complaint.informerName" required
                name="complaintInformerName" #complaintInformerNameModel="ngModel" #complaintInformerNameEl
                (ngModelChange)="complaint.informerName = $event.toUpperCase()">
              <abp-validation-summary [control]="complaintInformerNameModel" [controlEl]="complaintInformerNameEl">
              </abp-validation-summary>
            </div>
          </div>
          <div class="col">
            <div class="form-group required">
              <label class="col-form-label">Complainant/Informer Contact Number</label>
              <input type="text" class="form-control" [(ngModel)]="complaint.informerContactNumber"
                (ngModelChange)="complaint.informerContactNumber = $event.toUpperCase()" required
                name="complaintInformerContact" #complaintInformerContactModel="ngModel" #complaintInformerContactEl>
              <abp-validation-summary [control]="complaintInformerContactModel"
                [controlEl]="complaintInformerContactEl">
              </abp-validation-summary>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label class="col-form-label">Complainant/Informer Address</label>
              <input type="text" class="form-control" [(ngModel)]="complaint.informerAddress"
                (ngModelChange)="complaint.informerAddress = $event.toUpperCase()"
                [ngModelOptions]="{standalone: true}">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-group required">
              <label class="col-form-label">Statement or Brief Narrate</label>
              <textarea class="form-control" rows="10" [(ngModel)]="complaint.statement"
                (ngModelChange)="complaint.statement = $event.toUpperCase()" required name="complaintStatement"
                #complaintStatementModel="ngModel" #complaintStatementEl></textarea>
              <abp-validation-summary [control]="complaintStatementModel" [controlEl]="complaintStatementEl">
              </abp-validation-summary>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="panel panel-primary">
              <div class="panel-heading">
                <a class="btn btn-sm btn-info" (click)="addVictim()">
                  <i class="fa fa-plus-square"></i>
                  Add Victim
                </a>
              </div>
              <div class="panel-body">
                <table class="table table-hover text-nowrap">
                  <thead class="bg-light">
                    <tr>
                      <th>&nbsp;</th>
                      <th>NAME</th>
                      <th>AGE</th>
                      <th>GENDER</th>
                      <th>ADDRESS</th>
                      <th>CONTACT NUMBER</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let victim of victims">
                      <td>
                        <button type="button" class="btn btn-sm bg-danger" (click)="removeVictim(victim)">
                          <i class="fas fa-trash"></i>
                        </button>
                      </td>
                      <td>{{ fullName(victim) }}</td>
                      <td>{{ victim.age }}</td>
                      <td>{{ victim.gender }}</td>
                      <td>{{ victim.address }}</td>
                      <td>{{ victim.mobileNumber }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="panel panel-primary">
              <div class="panel-heading">
                <a class="btn btn-sm btn-info" (click)="addSuspect()">
                  <i class="fa fa-plus-square"></i>
                  Add Suspect
                </a>
              </div>
              <div class="panel-body">
                <table class="table table-hover text-nowrap">
                  <thead class="bg-light">
                    <tr>
                      <th>&nbsp;</th>
                      <th>NAME</th>
                      <th>AGE</th>
                      <th>GENDER</th>
                      <th>ADDRESS</th>
                      <th>CONTACT NUMBER</th>
                      <th>ALIAS</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let suspect of suspects">
                      <td>
                        <button type="button" class="btn btn-sm bg-danger" (click)="removeSuspect(suspect)">
                          <i class="fas fa-trash"></i>
                        </button>
                      </td>
                      <td>{{ fullName(suspect) }}</td>
                      <td> {{ suspect.age }}</td>
                      <td>{{ suspect.gender }}</td>
                      <td>{{ suspect.address }}</td>
                      <td>{{ suspect.mobileNumber }}</td>
                      <td>{{ suspect.alias }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="panel panel-primary">
              <div class="panel-heading">
                <a class="btn btn-sm btn-info" (click)="addWitness()">
                  <i class="fa fa-plus-square"></i>
                  Add Witness
                </a>
              </div>
              <div class="panel-body">
                <table class="table table-hover text-nowrap">
                  <thead class="bg-light">
                    <tr>
                      <th>&nbsp;</th>
                      <th>NAME</th>
                      <th>ADDRESS</th>
                      <th>CONTACT NUMBER</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let witness of witnesses">
                      <td>
                        <button type="button" class="btn btn-sm bg-danger" (click)="removeWitness(witness)">
                          <i class="fas fa-trash"></i>
                        </button>
                      </td>
                      <td>{{  fullName(witness) }}</td>
                      <td>{{ witness.address }}</td>
                      <td>{{ witness.mobileNumber }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label class="col-form-label required">Date received</label>
              <input type="text" class="form-control" bsDatepicker [bsValue]="receivedOn"
                (bsValueChange)="receivedOnValueChanged($event)">
            </div>
          </div>
          <div class="col">
            <div class="form-group required">
              <label class="col-form-label">Receiving officer</label>
              <input type="text" class="form-control" [(ngModel)]="complaint.receivingOffice"
                (ngModelChange)="complaint.receivingOffice = $event.toUpperCase()" required
                name="complaintReceivingOfficer" #complaintReceivingOfficerModel="ngModel" #complaintReceivingOfficerEl>
              <abp-validation-summary [control]="complaintReceivingOfficerModel"
                [controlEl]="complaintReceivingOfficerEl">
              </abp-validation-summary>
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label class="col-form-label">Referred by</label>
              <input type="text" class="form-control" [(ngModel)]="complaint.referredBy"
                (ngModelChange)="complaint.referredBy = $event.toUpperCase()" [ngModelOptions]="{standalone: true}">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-group">
              <label class="col-form-label">Referral number</label>
              <input type="text" class="form-control" [(ngModel)]="complaint.referralNumber"
                (ngModelChange)="complaint.referralNumber = $event.toUpperCase()" [ngModelOptions]="{standalone: true}">
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label class="col-form-label">Assigned to</label>
              <input type="text" class="form-control" [(ngModel)]="complaint.assignedTo"
                (ngModelChange)="complaint.assignedTo = $event.toUpperCase()" [ngModelOptions]="{standalone: true}">
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label class="col-form-label">Person/office making assignment</label>
              <input type="text" class="form-control" [(ngModel)]="complaint.officeMakingAssignment"
                (ngModelChange)="complaint.officeMakingAssignment = $event.toUpperCase()"
                [ngModelOptions]="{standalone: true}">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <button type="submit" class="btn btn-primary" [disabled]="!createSheetForm.form.valid || saving">
              Submit
            </button>
          </div>
        </div>
        <br />
      </form>
    </div>
  </section>
</div>
